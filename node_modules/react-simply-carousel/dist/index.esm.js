import e,{memo as t,useState as n,useRef as i,Children as r,useCallback as o,useEffect as d}from"react";var l=function(){return l=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},l.apply(this,arguments)};function c(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n}function s(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,r,o=n.call(e),d=[];try{for(;(void 0===t||t-- >0)&&!(i=o.next()).done;)d.push(i.value)}catch(e){r={error:e}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return d}function a(e,t,n){if(n||2===arguments.length)for(var i,r=0,o=t.length;r<o;r++)!i&&r in t||(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))}var u=t((function(t){var u=t.responsiveProps,v=void 0===u?[]:u,m=c(t,["responsiveProps"]),f=s(n(0),2),h=f[0],p=f[1],b=s(n(m.activeSlideIndex),2),w=b[0],y=b[1],x=i(null),S=i(null),g=i(null),E=i(!1),L=i(0),T=i(!1),I=i(""),k=i(null),C=i(null),M=i(0),W=i(w),P=v.reduce((function(e,t){void 0===t&&(t={});var n=t.minWidth,i=void 0===n?0:n,r=t.maxWidth,o=void 0===r?null:r,d=c(t,["minWidth","maxWidth"]);return h>i&&(!o||h<=o)?l(l({},e),d):e}),m),O=r.toArray(P.children),X=h?l(l({},P),{activeSlideIndex:Math.max(0,Math.min(P.activeSlideIndex,O.length-1)),itemsToShow:Math.min(O.length,P.itemsToShow||0),itemsToScroll:Math.min(O.length,P.itemsToScroll||1)}):m,A=X.containerProps,N=void 0===A?{}:A,F=N.style,V=void 0===F?{}:F,j=c(N,["style"]),z=X.innerProps,B=void 0===z?{}:z,R=B.style,D=void 0===R?{}:R,q=c(B,["style"]),H=X.itemsListProps,G=void 0===H?{}:H,J=G.style,K=void 0===J?{}:J,Q=G.onTransitionEnd,U=void 0===Q?void 0:Q,Y=c(G,["style","onTransitionEnd"]),Z=X.backwardBtnProps,$=void 0===Z?{}:Z,_=$.children,ee=void 0===_?null:_,te=$.show,ne=void 0===te||te,ie=c($,["children","show"]),re=X.forwardBtnProps,oe=void 0===re?{}:re,de=oe.children,le=void 0===de?null:de,ce=oe.show,se=void 0===ce||ce,ae=c(oe,["children","show"]),ue=X.activeSlideProps,ve=void 0===ue?{}:ue,me=ve.className,fe=void 0===me?"":me,he=ve.style,pe=void 0===he?{}:he,be=c(ve,["className","style"]),we=X.visibleSlideProps,ye=void 0===we?{}:we,xe=ye.className,Se=void 0===xe?"":xe,ge=ye.style,Ee=void 0===ge?{}:ge,Le=c(ye,["className","style"]),Te=X.updateOnItemClick,Ie=void 0!==Te&&Te,ke=X.activeSlideIndex,Ce=X.onRequestChange,Me=X.speed,We=void 0===Me?0:Me,Pe=X.delay,Oe=void 0===Pe?0:Pe,Xe=X.easing,Ae=void 0===Xe?"linear":Xe,Ne=X.itemsToShow,Fe=void 0===Ne?0:Ne,Ve=X.itemsToScroll,je=void 0===Ve?1:Ve,ze=X.children,Be=X.onAfterChange,Re=X.autoplay,De=void 0!==Re&&Re,qe=X.autoplayDirection,He=void 0===qe?"forward":qe,Ge=X.disableNavIfAllVisible,Je=void 0===Ge||Ge,Ke=X.hideNavIfAllVisible,Qe=void 0===Ke||Ke,Ue=X.centerMode,Ye=void 0!==Ue&&Ue,Ze=X.infinite,$e=void 0===Ze||Ze,_e=X.disableNavIfEdgeVisible,et=void 0===_e||_e,tt=X.disableNavIfEdgeActive,nt=void 0===tt||tt,it=X.dotsNav,rt=void 0===it?{}:it,ot=X.persistentChangeCallbacks,dt=void 0!==ot&&ot,lt=X.autoplayDelay,ct=void 0===lt?0:lt,st=X.preventScrollOnSwipe,at=void 0!==st&&st,ut=X.disableSwipeByMouse,vt=void 0!==ut&&ut,mt=X.disableSwipeByTouch,ft=void 0!==mt&&mt,ht=X.touchSwipeTreshold,pt=X.mouseSwipeTreshold,bt=X.swipeTreshold,wt=X.touchSwipeRatio,yt=X.mouseSwipeRatio,xt=X.swipeRatio,St=void 0===xt?1:xt,gt=rt||{},Et=gt.show,Lt=void 0!==Et&&Et,Tt=gt.containerProps,It=void 0===Tt?{}:Tt,kt=gt.itemBtnProps,Ct=void 0===kt?{}:kt,Mt=gt.activeItemBtnProps,Wt=void 0===Mt?{}:Mt,Pt=r.count(ze)-1,Ot=Fe===O.length,Xt=Qe&&Ot,At=Je&&Ot,Nt=ke-w==0||!We&&!Oe?"none":"transform ".concat(We,"ms ").concat(Ae," ").concat(Oe,"ms"),Ft=o((function(e){var t,n=e.correctionSlideIndex,i=e.prevCorrectionSlideIndex,r=e.curActiveSlideIndex,o=g.current.offsetWidth,d=g.current.children,l=d.length,c=$e?a([],s(d),!1).slice(l/3-i,l/3-i+l/3):a([],s(d),!1),u=null===(t=c[r])||void 0===t?void 0:t.offsetWidth,v=Fe?c.reduce((function(e,t,n){return n>=r&&n<r+Fe||n<r&&n<r+Fe-c.length?e+t.offsetWidth:e}),0):S.current.offsetWidth,m=Math.min(v,S.current.offsetWidth),f=o-m,h=Ye&&$e?-(m-u)/2:0,p=$e?o/3:0,b=n-r==0?0:"forward"===I.current&&r<n?p:"backward"===I.current&&r>n?-p:0,w=r-n!=0,y=function(e){var t=c.reduce((function(t,n,i){return i>=e?t:t+(n.offsetWidth||0)}),0);return $e?t:Math.min(f,t)},x=w&&$e?y(n):0,E=w||!$e?y(r):0,L=At?0:E-x+h+b+p,T="translateX(-".concat(L,"px)"),k=$e?p+h:Math.min(f,c.reduce((function(e,t,n){return n<r?e+t.offsetWidth:e}),0)),C=k+m,M=c.map((function(e,t){return{slideIndex:t,htmlElement:e}})),W=$e?a(a(a(a([],s(c.slice(r).map((function(e,t){return{slideIndex:t+r,htmlElement:e}}))),!1),s(M),!1),s(M),!1),s(c.slice(0,r).map((function(e,t){return{slideIndex:t,htmlElement:e}}))),!1):M,P=W.reduce((function(e,t){var n=t.slideIndex,i=t.htmlElement.offsetWidth;return(e.summ>=k&&e.summ<C||e.summ+i>k&&e.summ+i<=C)&&e.items.push({slideIndex:n,isFullyVisible:e.summ+i<=C&&e.summ>=k}),e.summ+=i,e}),{summ:0,items:[]}),O=!!P.items.find((function(e){return 0===e.slideIndex})),X=!!P.items.find((function(e){return e.slideIndex===c.length-1}));return{slidesHTMLElements:c,innerMaxWidth:v,itemsListMaxTranslateX:f,activeSlideWidth:u,offsetCorrectionForCenterMode:h,offsetCorrectionForInfiniteMode:p,itemsListTranslateX:L,itemsListTransform:T,visibleSlides:P.items,isFirstSlideVisible:O,isLastSlideVisible:X}}),[Ye,At,$e,Fe]),Vt=h?Ft({prevCorrectionSlideIndex:W.current,curActiveSlideIndex:ke,correctionSlideIndex:w}):{},jt=Vt.innerMaxWidth,zt=void 0===jt?0:jt,Bt=Vt.itemsListMaxTranslateX,Rt=void 0===Bt?0:Bt,Dt=Vt.activeSlideWidth,qt=void 0===Dt?0:Dt,Ht=Vt.offsetCorrectionForCenterMode,Gt=void 0===Ht?0:Ht,Jt=Vt.offsetCorrectionForInfiniteMode,Kt=void 0===Jt?0:Jt,Qt=Vt.itemsListTranslateX,Ut=void 0===Qt?0:Qt,Yt=Vt.itemsListTransform,Zt=void 0===Yt?"none":Yt,$t=Vt.visibleSlides,_t=void 0===$t?[]:$t,en=o((function(e){var t;return"forward"===e?(t=ke+je)>Pt?$e?t-Pt-1:Pt:t:"backward"===e?(t=ke-je)<0?$e?Pt+1+t:0:t:ke}),[ke,je,Pt,$e]),tn=o((function(e,t){var n;if(I.current=t,g.current.style.transition=We||Oe?"transform ".concat(We,"ms ").concat(Ae," ").concat(Oe,"ms"):"none",e!==ke||dt){clearTimeout(k.current);var i=Ft({correctionSlideIndex:w,prevCorrectionSlideIndex:w,curActiveSlideIndex:e}),r=i.visibleSlides,o=i.isFirstSlideVisible,d=i.isLastSlideVisible,l=i.itemsListTransform;e!==ke&&(null===(n=g.current)||void 0===n?void 0:n.style.transform)===l&&(E.current=!0),g.current.style.transform=l,Ce(e,{visibleSlides:r,isFirstSlideVisible:o,isLastSlideVisible:d})}else g.current.style.transform="translateX(-".concat(Gt+Kt+($e?0:Ut),"px)")}),[dt,ke,Gt,Oe,Ae,We,Ce,Kt,$e,Ut,w,Ft]),nn=o((function(){De&&(clearTimeout(k.current),k.current=setTimeout((function(){tn(en(He),He)}),ct||Oe))}),[De,He,ct,tn,en,Oe]),rn=o((function(){tn(en("backward"),"backward")}),[tn,en]),on=o((function(e){y(ke),U&&U(e)}),[ke,U]),dn=o((function(){tn(en("forward"),"forward")}),[tn,en]),ln=function(e,t,n){return e.map((function(e,i){var r=e.props,o=void 0===r?{}:r,d=o.className,s=void 0===d?"":d,a=o.onClick,u=void 0===a?null:a,v=o.style,m=void 0===v?{}:v,f=c(o,["className","onClick","style"]),h=c(e,["props"]),p=$e?M.current>=O.length?"forward":"backward":i>=ke?"forward":"backward",b=i+t===ke,w=_t.find((function(e){return e.slideIndex===i+t})),y="".concat(s," ").concat(b?fe:""," ").concat(w?Se:"").trim()||void 0,x=l(l(l(l({},m),w?Ee:{}),b?pe:{}),{boxSizing:"border-box",margin:0}),S=!n&&Ie?function(e){var t=e.direction,n=e.index,i=e.onClick;return function(e){tn(n,t||(ke<n?"forward":"")||(ke>n?"backward":"")),i&&i(e)}}({direction:p,index:i+t,onClick:u}):u,g=l(l(l({role:"tabpanel",className:y,style:x,onClick:S},f),w?Le:{}),b?be:{});return M.current+=1,l({props:g},h)}))};return d((function(){var e=g.current;function t(e){e.preventDefault(),e.stopPropagation()}function n(e){var t,n;T.current=!0;var i=!!(null===(t=e.touches)||void 0===t?void 0:t[0]),r=i?null===(n=e.touches)||void 0===n?void 0:n[0].clientX:e.clientX,o=(L.current-r)*((i?wt:yt)||St)+Gt+Kt+($e?0:Ut),d=g.current.offsetWidth,l=Math.max(-o,-d);g.current.style.transition="none",g.current.style.transform="translateX(".concat(l,"px)")}function i(e){var r,o,d;if(document.removeEventListener("mousemove",n),document.removeEventListener("mouseup",i),document.removeEventListener("touchmove",n),document.removeEventListener("touchend",i),T.current){null===(r=e.target)||void 0===r||r.addEventListener("click",t);var l=!!(null===(o=e.changedTouches)||void 0===o?void 0:o[0]),c=l?e.changedTouches[e.changedTouches.length-1].clientX:e.clientX,s=(L.current-c)*((l?wt:yt)||St),a=(l?ht:pt)||bt||qt/2,u=s>a?{index:en("forward"),direction:"forward"}:s<-a?{index:en("backward"),direction:"backward"}:{index:ke,direction:"forward"};tn(u.index,u.direction)}else null===(d=e.target)||void 0===d||d.removeEventListener("click",t);L.current=0,T.current=!1}function r(e){var t,r;clearTimeout(k.current);var o=!!(null===(t=e.touches)||void 0===t?void 0:t[0]);L.current=o?null===(r=e.touches)||void 0===r?void 0:r[0].clientX:e.clientX,o?(document.addEventListener("touchmove",n),document.addEventListener("touchend",i)):(document.addEventListener("mousemove",n),document.addEventListener("mouseup",i))}return At||(vt||null==e||e.addEventListener("mousedown",r),ft||null==e||e.addEventListener("touchstart",r,{passive:!0}),vt&&ft||null==e||e.addEventListener("dragstart",i)),function(){T.current=!1,L.current=0,null==e||e.removeEventListener("mousedown",r),null==e||e.removeEventListener("touchstart",r),null==e||e.removeEventListener("dragstart",i),document.removeEventListener("mousemove",n),document.removeEventListener("mouseup",i),document.removeEventListener("touchmove",n),document.removeEventListener("touchend",i)}}),[$e,Ut,Zt,Gt,Kt,ke,qt,en,tn,At,vt,ft,ht,pt,bt,wt,yt,St]),d((function(){return ke!==w?(!We&&!Oe||E.current)&&(E.current=!1,y(ke)):(Be&&Be(ke,w),($e||"forward"===He&&ke!==Pt||"backward"===He&&0!==ke)&&nn()),function(){clearTimeout(k.current)}}),[w,ke,Be,We,Oe,nn,$e,Pt,He]),d((function(){return h&&nn(),function(){clearTimeout(k.current)}}),[h]),d((function(){function e(){clearTimeout(C.current),clearTimeout(k.current),C.current=setTimeout((function(){h!==window.innerWidth&&p(window.innerWidth)}),400)}return h!==window.innerWidth&&p(window.innerWidth),window.addEventListener("resize",e),function(){clearTimeout(C.current),window.removeEventListener("resize",e)}}),[h]),M.current=0,W.current=w,e.createElement("div",l({style:l({display:"flex",flexFlow:"row wrap",boxSizing:"border-box",justifyContent:"center",width:"100%"},V)},j,{ref:x}),ne&&!Xt&&e.createElement("button",l({},ie,{type:"button",onClick:(0===Ut&&et||0===ke&&nt)&&!$e?void 0:rn,disabled:"boolean"==typeof ie.disabled?ie.disabled:!(!(0===Ut&&et||0===ke&&nt)||$e)}),ee),e.createElement("div",l({},q,{style:l(l({width:"100%"},D),{display:"flex",boxSizing:"border-box",flexFlow:"row wrap",padding:"0",overflow:"hidden",maxWidth:zt?"".concat(zt,"px"):void 0,flex:zt?void 0:"1 0"}),ref:S}),e.createElement("div",l({},Y,{style:l(l({},K),{display:"flex",boxSizing:"border-box",outline:"none",transition:Nt,transform:Zt,touchAction:at?"none":"auto"}),onTransitionEnd:We||Oe?on:U,tabIndex:-1,role:"presentation",ref:g}),$e&&ln(O.slice(w),w,At),ln(O,0,At),$e&&ln(O,0,At),$e&&ln(O.slice(0,w),0,At))),se&&!Xt&&e.createElement("button",l({},ae,{type:"button",onClick:(Ut===Rt&&et||ke===Pt&&nt)&&!$e?void 0:dn,disabled:"boolean"==typeof ae.disabled?ae.disabled:!(!(Ut===Rt&&et||ke===Pt&&nt)||$e)}),le),!!Lt&&e.createElement("div",l({style:{width:"100%",display:"flex",justifyContent:"center"}},It),Array.from({length:Math.ceil(O.length/je)}).map((function(t,n){return e.createElement("button",l({type:"button",key:n,title:"".concat(n)},Ct,ke>=n*je&&ke<Math.min(je*(n+1),Pt+1)?Wt:{},{onClick:function(){tn(Math.min(n*je,O.length-1),Math.min(n*je,O.length-1)>ke?"forward":"backward")}}))}))))}));export{u as default};
